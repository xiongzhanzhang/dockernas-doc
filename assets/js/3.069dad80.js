(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{273:function(s,t,a){s.exports=a.p+"assets/img/app_store.b335b267.jpg"},274:function(s,t,a){s.exports=a.p+"assets/img/filebrowser.f5d434b9.jpg"},275:function(s,t,a){s.exports=a.p+"assets/img/fb_instance.54ec401d.jpg"},289:function(s,t,a){"use strict";a.r(t);var r=a(14),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装docker")]),s._v(" "),t("p",[s._v("参考"),t("a",{attrs:{href:"https://docs.docker.com/desktop/install/windows-install",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/desktop/install/windows-install"),t("OutboundLink")],1),s._v("，使用WSL2后端，系统配置要求如下:")]),s._v(" "),t("ul",[t("li",[s._v("BIOS开启虚拟化")]),s._v(" "),t("li",[s._v("Windows10 64位(build 19043)或更高, 或者windows11 64位")]),s._v(" "),t("li",[s._v("安装WSL2，在管理员模式下打开PowerShell，执行wsl --install，或者采用手动安装的方式，参考"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/windows/wsl/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://learn.microsoft.com/zh-cn/windows/wsl/install"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("p",[s._v("安装好后，系统托盘会出现Docker Desktop图标，可点开页面后查看docker服务状态是否正常。可进行如下配置：")]),s._v(" "),t("ul",[t("li",[s._v("设置登录后自动启动docker")]),s._v(" "),t("li",[s._v("配置镜像加速，完整配置如下所示：")])]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"builder"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gc"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"defaultKeepStorage"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20GB"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"enabled"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"experimental"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"features"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"buildkit"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.docker-cn.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://hub-mirror.c.163.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.ustc.edu.cn"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"安装dockernas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装dockernas"}},[s._v("#")]),s._v(" 安装dockernas")]),s._v(" "),t("p",[s._v("控制台执行如下命令：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" dockernas "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),s._v(" always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /var/run/docker.sock:/var/run/docker.sock "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" G:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nas:/home/dockernas/data xiongzhanzhang/dockernas\n")])])]),t("p",[s._v("注意8080端口不能被占用，G:\\nas为nas系统存储数据的目录，需替换为自己机器实际存储数据的目录。可在Docker Desktop查看容器是否顺利启动，浏览器访问"),t("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080"),t("OutboundLink")],1),s._v("，账号密码保存在nas数据目录下的config.json文件中。")]),s._v(" "),t("p",[s._v("nas数据目录结构如下所示：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yi@DESKTOP-FQBM7BV:/mnt/g/nas$ tree -L 1\n.\n├── apps\n├── config.json\n├── dfs\n├── local\n├── logs\n└── meta\n")])])]),t("p",[s._v("各目录作用如下：")]),s._v(" "),t("ul",[t("li",[s._v("apps目录保存第三方应用模板，注意不要放置其它文件到该目录下。")]),s._v(" "),t("li",[s._v("dfs保存的是应用数据，部署应用的时候，可能会需要选择这个目录底下的某个文件夹作为数据保存目录。")]),s._v(" "),t("li",[s._v("local目录保存临时的应用数据，应用删除这里对应的应用数据也会删除掉。注意，部署应用的时候如果数据目录选项留空，会将数据保存到local目录。")]),s._v(" "),t("li",[s._v("logs为系统日志，报错时可在这里查看原因。")]),s._v(" "),t("li",[s._v("meta为元数据目录。")])]),s._v(" "),t("p",[s._v("登录成功后可以看到如下页面：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(273),alt:"app_store"}})]),s._v(" "),t("h2",{attrs:{id:"安装filebrowser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装filebrowser"}},[s._v("#")]),s._v(" 安装filebrowser")]),s._v(" "),t("p",[s._v("找到filebrowser应用，点击进行配置，如下所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(274),alt:"filebrowser"}})]),s._v(" "),t("p",[s._v("基本配置解释如下所示：")]),s._v(" "),t("ul",[t("li",[s._v("实例名为实例名字，不能重复、不能包含中文")]),s._v(" "),t("li",[s._v("注备可不填。一个应用可以部署多个实例，可以使用注备标准不同应用的用途")]),s._v(" "),t("li",[s._v("仅本地访问开启后，应用的网络服务只能在本机访问，这样可以增加网络安全性")]),s._v(" "),t("li",[s._v("版本为应用的版本，一般选择latest")])]),s._v(" "),t("p",[s._v("上述配置为部署所有应用通用的配置，部分应用还有自定义的配置，filebrowser的自定义配置解释如下所示：")]),s._v(" "),t("ul",[t("li",[s._v("web访问端口：指filebrowser在本机的访问端口，主要访问端口不能和其他实例冲突，否则会无法部署")]),s._v(" "),t("li",[s._v("管理的目录：对应nas数据目录下，dfs文件夹的子目录，图中选择了根目录，表示管理dfs整个目录。为了安全性，尽量最小化每个应用实例使用的目录，避免不同实例之间冲突，也能提升数据安全性")])]),s._v(" "),t("p",[s._v("可在应用实例页面查看fb实例的状态，如下图所示：\n"),t("img",{attrs:{src:a(275),alt:"fb"}})]),s._v(" "),t("p",[s._v("如果实例状态是运行中，可点击链接（即图片中8082的文本）访问fb实例提供的web服务，默认账号和密码都是admin。")])])}),[],!1,null,null,null);t.default=e.exports}}]);